webpackJsonp([35],{"6Qob":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("qMoM"),a=r.n(o);for(var l in o)"default"!==l&&function(e){r.d(t,e,function(){return o[e]})}(l);var s=r("Zlo6");var c=function(e){r("XYlc")},i=r("VU/8")(a.a,s.a,!1,c,"data-v-2b8fd455",null);t.default=i.exports},XYlc:function(e,t){},Zlo6:function(e,t,r){"use strict";var o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-page"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm login-container",attrs:{model:e.ruleForm,rules:e.rules2,"label-position":"left","label-width":"0px"}},[r("h3",{staticClass:"title"},[e._v("系统登录")]),e._v(" "),r("el-form-item",{attrs:{prop:"account"}},[r("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},on:{blur:e.checkUser},model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account",t)},expression:"ruleForm.account"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),e.googleShow?r("el-form-item",{attrs:{prop:"google_code"}},[r("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"谷歌验证码"},model:{value:e.ruleForm.google_code,callback:function(t){e.$set(e.ruleForm,"google_code",t)},expression:"ruleForm.google_code"}})],1):e._e(),e._v(" "),r("el-checkbox",{staticClass:"remember",model:{value:e.ruleForm.checked,callback:function(t){e.$set(e.ruleForm,"checked",t)},expression:"ruleForm.checked"}},[e._v("记住密码")]),e._v(" "),r("a",{staticClass:"findPassword",on:{click:e.forgotPass}},[e._v("找回密码")]),e._v(" "),r("el-form-item",{staticStyle:{width:"100%"}},[r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.logining},nativeOn:{click:function(t){return t.preventDefault(),e.handleData(t)}}},[e._v("登录")])],1),e._v(" "),r("a",{staticClass:"register",on:{click:e.register}},[e._v("没有账号？去注册")])],1)],1)},staticRenderFns:[]};t.a=o},qMoM:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=l(r("mvHQ")),a=l(r("woOf"));function l(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{logining:!1,googleShow:!1,ruleForm:{account:"",password:"",checked:!1},rules2:{account:[{required:!0,message:"请输入账号",trigger:"blur"},{min:6,max:30,message:"输入长度在6-30位之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:30,message:"输入长度在6-30位之间",trigger:"blur"}],google_code:[{required:!0,message:"请输入谷歌验证码",trigger:"blur"},{min:6,max:30,message:"输入长度在6-30位之间",trigger:"blur"}]},checked:!1}},methods:{forgotPass:function(){this.$router.push("/forgotPass")},handleData:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(t){var r={notice:"登陆成功！"};(0,a.default)(r,e.ruleForm),e.$api("/admin/manager/login",r).then(function(t){0==t.code&&(e.ruleForm.checked?(delete e.ruleForm.google_code,e.$cookie.set("ac",(0,o.default)(e.ruleForm),"30")):e.$cookie.remove("ac"),e.$refs.ruleForm.resetFields(),e.ruleForm={},e.$router.push("/"))})}})},register:function(){this.$router.push("/register")},checkUser:function(){var e=this;""!=this.ruleForm.account&&this.$api("/admin/nointercept/get_account_setting",{account:this.ruleForm.account,errorHandle:!0}).then(function(t){0==t.code&&t.data.isSetTotpAuth?e.googleShow=!0:e.googleShow=!1})}},created:function(){this.$cookie.get("ac")&&(this.ruleForm=JSON.parse(this.$cookie.get("ac")),this.checkUser())}}}});
//# sourceMappingURL=35.fafd313ce0679b80ffa8.js.map